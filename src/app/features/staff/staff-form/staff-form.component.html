<div class="staff-form-page">
  <div class="form-content">

    <div class="header-section">
      <h2>ระบบวางแผนเส้นทางจัดการเก็บขยะ</h2>
      <p>สมัครสมาชิก หรือ สร้างบัญชีใหม่</p>
    </div>

    <form [formGroup]="form" class="staff-form">

      <div class="avatar-section">
        <div class="avatar-wrapper">
          <img [src]="form.value.s_image || 'image/13.svg'" alt="avatar" />
          <label class="upload-btn" matRipple>
            <input type="file" accept="image/*" (change)="onImageFileSelected($event)" />
            <mat-icon>photo_camera</mat-icon>
          </label>
        </div>
        <p>อัพโหลดรูปประจำตัวพนักงาน</p>
      </div>

      <div class="input-group">

        <mat-form-field appearance="outline">
          <mat-label>คำนำหน้า*</mat-label>
          <input matInput formControlName="prefix" placeholder="คำนำหน้า" />
        </mat-form-field>


        <mat-form-field appearance="outline">
          <mat-label>ชื่อ*</mat-label>
          <input matInput formControlName="firstname" placeholder="ชื่อ" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>นามสกุล*</mat-label>
          <input matInput formControlName="lastname" placeholder="นามสกุล" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>อีเมล*</mat-label>
          <input matInput formControlName="email" placeholder="email@mail.com" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>ตำแหน่ง*</mat-label>
          <mat-select formControlName="role" placeholder="ตำแหน่ง ">
            <mat-option value="DRIVER">พนักงานขับรถ</mat-option>
            <mat-option value="COLLECTOR">พนักงานเก็บขยะ</mat-option>
            <mat-option value="ADMIN">พนักงานวางเเผนเส้นทาง</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>สถานะ*</mat-label>
          <mat-select formControlName="status" placeholder="สถานะ">
            <mat-option value="ACTIVE">ใช้งาน</mat-option>
            <mat-option value="INACTIVE">ไม่ใช้งาน</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>เบอร์โทรศัพท์*</mat-label>
          <input matInput formControlName="phone_number" placeholder="xxxxxxxxxx" />
        </mat-form-field>

        @if (!id) {
        <mat-form-field appearance="outline">
          <mat-label>รหัสผ่าน*</mat-label>
          <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" />
          <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        }

        <mat-form-field appearance="outline" [class.d-none]="true"> <mat-label>คำนำหน้า</mat-label>
          <input matInput formControlName="prefix" />
        </mat-form-field>

      </div>

      <button mat-flat-button class="submit-btn" (click)="submit()" [disabled]="loading()">
        @if (!loading()) { <span>สมัครสมาชิก</span> }
        @else { <span>กำลังบันทึก...</span> }
      </button>

    </form>
  </div>
</div>